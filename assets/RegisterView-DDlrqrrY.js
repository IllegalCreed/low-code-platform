import{e as M,u as F,r as L,f as T,o as j,d as z,g as l,t as n,h as e,i as s,m as p,j as m,w as c,b as i,k as D,a as P,l as Z,n as G,p as H,q as J,s as K,_ as Q}from"./index-CcCMKRKU.js";import{u as W,a as X,b as Y,t as ee,c as ae,d as x,e as te}from"./validateCatch-DBvZs2JT.js";import"./base-D4jtK3hA.js";import"./isObject-CWTNhToz.js";const oe=u=>(J("data-v-58157352"),u=u(),K(),u),re={class:"register-root-container"},se={class:"title"},ne={class:"description"},le={flex:"","flex-row":"","items-center":"","mb-7":"","w-70":"","text-3":""},ce={class:"error-message"},ie={flex:"","flex-row":"","items-center":"","mt-4":"","w-70":"","text-3":"","space-x-2":""},ue={flex:"","flex-row":"","items-center":"","mt-2":"","w-70":"","text-3":"","space-x-2":""},de=oe(()=>l("span",null,"已经注册但未激活？",-1)),pe=M({__name:"RegisterView",setup(u){const{t:a}=F(),{register:b,usernameCheck:k,emailCheck:C}=W(),{checkCatch:v}=X(),E=L(""),{handleSubmit:U,isSubmitting:q,defineField:d}=Y({validationSchema:ee(ae({username:x().required(()=>a("accountValidate.usernameRequiredError")).test("unique-username",()=>a("accountValidate.usernameUniqueError"),async(t,o)=>await v(t,o.path,()=>k(t))).default(""),email:x().email(()=>a("accountValidate.emailValidError")).required(()=>a("accountValidate.emailRequiredError")).test("unique-email",()=>a("accountValidate.emailUniqueError"),async(t,o)=>await v(t,o.path,()=>C(t))).default(""),password:x().required(()=>a("accountValidate.passwordRequiredError")).matches(/.{8,}/,()=>a("accountValidate.passwordLengthError")).matches(/[A-Z]/,()=>a("accountValidate.passwordUppercaseError")).matches(/[a-z]/,()=>a("accountValidate.passwordLowercaseError")).matches(/\d/,()=>a("accountValidate.passwordNumberError")).matches(/[@$!%*?&]/,()=>a("accountValidate.passwordSpecialCharError")).default(""),isAgree:te().oneOf([!0],()=>a("accountValidate.termsAgreementError")).default(!1)}))}),[_,y]=d("username",t=>({props:{error:t.errors[0]},validateOnModelUpdate:!1})),[h,S]=d("password",t=>({props:{error:t.errors[0]},validateOnModelUpdate:t.errors.length>0})),[g,R]=d("email",t=>({props:{error:t.errors[0]},validateOnModelUpdate:!1})),[f,$]=d("isAgree",{props:t=>({error:t.errors[0]})}),A=T(),I=U(async t=>{try{await b({username:t.username,password:t.password,email:t.email})}catch{}});return(t,o)=>{const w=D,V=P,N=Z,O=G,B=H;return j(),z("div",re,[l("span",se,n(e(a)("account.signUp").toUpperCase()),1),l("span",ne,n(e(a)("account.createAccount")),1),s(w,p({class:"account-input",modelValue:e(_),"onUpdate:modelValue":o[0]||(o[0]=r=>m(_)?_.value=r:null),placeholder:e(a)("account.account"),clearable:""},e(y)),null,16,["modelValue","placeholder"]),s(w,p({class:"account-input",modelValue:e(g),"onUpdate:modelValue":o[1]||(o[1]=r=>m(g)?g.value=r:null),placeholder:e(a)("account.email"),type:"email",clearable:""},e(R)),null,16,["modelValue","placeholder"]),s(w,p({class:"account-input",modelValue:e(h),"onUpdate:modelValue":o[2]||(o[2]=r=>m(h)?h.value=r:null),placeholder:e(a)("account.password"),type:"password",clearable:"","show-password":""},e(S)),null,16,["modelValue","placeholder"]),l("div",le,[s(N,p({modelValue:e(f),"onUpdate:modelValue":o[3]||(o[3]=r=>m(f)?f.value=r:null)},e($)),{default:c(()=>[i(n(e(a)("account.agree"))+" ",1),s(V,{"ml-1":"",href:"/policy"},{default:c(()=>[i(n(e(a)("account.privacy")),1)]),_:1})]),_:1},16,["modelValue"])]),l("span",ce,n(e(E)),1),s(O,{id:"register-btn",onClick:e(I),loading:e(q)},{default:c(()=>[i(n(e(a)("account.register")),1)]),_:1},8,["onClick","loading"]),l("div",ie,[l("span",null,n(e(a)("account.haveAccount")),1),s(V,{onClick:o[4]||(o[4]=r=>e(A).push({name:"login"}))},{default:c(()=>[i(n(e(a)("account.signIn")),1)]),_:1})]),l("div",ue,[de,s(V,{onClick:o[5]||(o[5]=r=>e(A).push({name:"resend"}))},{default:c(()=>[i(" 去激活 ")]),_:1})]),s(B,{absolute:"","top-4":"","right-8":""})])}}}),fe=Q(pe,[["__scopeId","data-v-58157352"]]);export{fe as default};
